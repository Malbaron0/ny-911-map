(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{57:function(e,t,a){e.exports=a(93)},62:function(e,t,a){},93:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(20),l=a.n(o),c=(a(62),a(64),a(13)),i=a(14),s=a(17),u=a(15),m=a(18),d=a(94),p=a(96);function h(e,t){var a=e.concat(t);return a=a.filter(function(e,t,a){return a.indexOf(e)===t})}var f={historicalDataURL:"https://data.cityofnewyork.us/resource/9s4h-37hy.json",yearToDateDataURL:"https://data.cityofnewyork.us/resource/7x9x-zpz6.json",nycData:function(e){return fetch(e,{headers:{"X-App-Token":"VxVfB1l051bDWPhFmrm2QeX9a"}}).then(function(e){return e.json()})},getYearsAndCrimeTypes:function(e){var t=e.map(function(e){return e.reduce(function(e,t){var a=new Date(t.cmplnt_fr_dt).getFullYear();return void 0===e.crimeTypes&&void 0===e.years&&(e.crimeTypes=[],e.years=[]),e.crimeTypes.includes(t.law_cat_cd)||void 0!==t.law_cat_cd&&e.crimeTypes.push(t.law_cat_cd),e.years.includes(a)||Number.isNaN(a)||e.years.push(a),e},{})});return{crimeTypes:h(t[0].crimeTypes,t[1].crimeTypes),years:h(t[0].years,t[1].years)}},getByYear:function(e,t){return e.filter(function(e){var a=new Date(e.cmplnt_fr_dt).getUTCFullYear().toString();if(t.includes(a))return!0})},getByCrime:function(e,t){return e.filter(function(e){if(t.includes(e.law_cat_cd))return!0})},getByBorough:function(e,t){return e.filter(function(e){if(t.includes(e.boro_nm))return!0})},getMultiple:function(e,t){return e.filter(function(e){var a=new Date(e.cmplnt_fr_dt).getUTCFullYear().toString();return!!t.yearValues.includes(a)||(!Array.isArray(t.yearValues)||!t.yearValues.length||void 0)}).filter(function(e){return!!t.crimeValues.includes(e.law_cat_cd)||(!Array.isArray(t.crimeValues)||!t.crimeValues.length||void 0)}).filter(function(e){return!!t.boroughValues.includes(e.boro_nm)||(!Array.isArray(t.boroughValues)||!t.boroughValues.length||void 0)})}},g=a(66),y=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).MarkerCollection=function(e,t){if(n=t,0===Object.keys(n).length&&n.constructor===Object)return r.a.createElement(d.a,{position:[40.7128,-74.006]},r.a.createElement(p.a,null,"Search for crimes through the search filter above."));var n,o=f.getMultiple(e,t);return a.createMarkers(o)},a.createMarkers=function(e){return e.reduce(function(e,t){if(t.hasOwnProperty("latitude")){var a=[t.latitude,t.longitude],n=g(t.cmplnt_to_tm,"HH:mm:ss").format("h:mm A"),o=g(t.cmplnt_fr_dt).format("MMMM Do YYYY");e.push(r.a.createElement(d.a,{position:a},r.a.createElement(p.a,null,r.a.createElement("div",null,"Offense Description : ",t.ofns_desc),r.a.createElement("div",null,"Offense Date: ",o),r.a.createElement("div",null,"Offense Time: ",n))))}return e},[])},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return this.MarkerCollection(this.props.data,this.props.selectedCategoryValues)}}]),t}(n.Component),b=a(95),v=a(97),C=a(6),V=a.n(C),O=function(e){function t(){var e,n;Object(c.a)(this,t);for(var r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).defaultPosition={lat:40.73061,lng:-73.935242,zoom:10},n.fixLeafletMarker=function(){delete V.a.Icon.Default.prototype._getIconUrl,V.a.Icon.Default.mergeOptions({iconRetinaUrl:a(70),iconUrl:a(71),shadowUrl:a(72)})},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=[this.defaultPosition.lat,this.defaultPosition.lng];return this.fixLeafletMarker(),r.a.createElement(b.a,{className:"map",center:e,zoom:this.defaultPosition.zoom},r.a.createElement(v.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"}),r.a.createElement(y,{data:this.props.data,selectedCategoryValues:this.props.selectedCategoryValues}))}}]),t}(n.Component),E=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{class:"spinner"},r.a.createElement("div",{class:"double-bounce1"}),r.a.createElement("div",{class:"double-bounce2"}))}}]),t}(n.Component),j=a(41),w=(a(73),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).searchCriteria={crimeValues:[],yearValues:[],boroughValues:[]},a.handleChangeCrime=function(e){console.log(e),a.searchCriteria.crimeValues=a.getValues(e)},a.handleChangeYear=function(e){console.log(a.getValues(e)),a.searchCriteria.yearValues=a.getValues(e)},a.handleChangeBorough=function(e){console.log(e),a.searchCriteria.boroughValues=a.getValues(e)},a.getValues=function(e){return e.map(function(e){return e.value})},a.handleSubmit=function(e){e.preventDefault(),a.props.updateCategoryValues(a.searchCriteria)},a.crimeTypes=function(e){var t=e.map(function(e){return{value:"".concat(e),label:"".concat(e)}});return r.a.createElement(j.a,{onChange:a.handleChangeCrime,isMulti:!0,className:"basic-multi-select",options:t})},a.yearTypes=function(e){var t=e.sort().filter(function(e){return e}).map(function(e){return{value:"".concat(e),label:"".concat(e)}});return r.a.createElement(j.a,{isMulti:!0,className:"basic-multi-select",onChange:a.handleChangeYear,options:t})},a.boroughTypes=function(){return r.a.createElement(j.a,{isMulti:!0,className:"basic-multi-select",onChange:a.handleChangeBorough,options:[{value:"BROOKLYN",label:"Brooklyn"},{value:"QUEENS",label:"Queens"},{value:"BRONX",label:"Bronx"},{value:"MANHATTAN",label:"Manhattan"}]})},a.choiceItems=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"category-selects nav-item"},a.yearTypes(e.years),a.crimeTypes(e.crimeTypes),a.boroughTypes()),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{"data-toggle":"collapse","data-target":".navbar-collapse.show",className:"btn btn-outline-secondary",onClick:a.handleSubmit,type:"button"},"Submit")))},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("nav",{className:"sideBar navbar fixed-top navbar-dark bg-dark"},r.a.createElement("div",{className:"navbar-brand"},"NYC Crime Map"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},this.choiceItems(this.props.categoryValues)))}}]),t}(n.Component)),T=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).updateCategoryValues=function(e){a.setState({selectedCategoryValues:e}),console.log(e)},a.state={loading:!0,crimeData:[],categoryValues:{},selectedCategoryValues:{},error:""},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),Promise.all([f.nycData(f.historicalDataURL),f.nycData(f.yearToDateDataURL)]).then(function(t){e.setState({crimeData:h(t[0],t[1]),categoryValues:f.getYearsAndCrimeTypes(t)})}).then(function(t){e.setState({loading:!1})}).catch(function(t){e.setState({loading:!1,error:t})})}},{key:"render",value:function(){return this.state.loading?r.a.createElement(E,null):r.a.createElement("div",{className:"parent-container"},r.a.createElement(w,{updateCategoryValues:this.updateCategoryValues,categoryValues:this.state.categoryValues}),r.a.createElement(O,{selectedCategoryValues:this.state.selectedCategoryValues,data:this.state.crimeData}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(T,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[57,2,1]]]);
//# sourceMappingURL=main.67d5a9f5.chunk.js.map